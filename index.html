<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Семейный бюджет</title>

    <!-- Стили -->
    <link rel="stylesheet" href="./src/styles/main.css" />
    <link rel="stylesheet" href="./src/styles/themes.css" />
    <link rel="stylesheet" href="./src/styles/components.css" />
    <link rel="stylesheet" href="./src/styles/modals.css" />
    <link rel="stylesheet" href="./src/styles/responsive.css" />

    <!-- Иконки Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body data-theme="dark">
    <!-- Экран загрузки -->
    <div id="loading-screen" class="loading-screen">
      <div class="loader"></div>
      <p>Загружаем ваш бюджет...</p>
    </div>

    <!-- Экран входа/регистрации -->
    <div id="auth-screen" class="auth-screen hidden">
      <div class="auth-container">
        <div class="auth-header">
          <h1><i class="fas fa-wallet"></i> Семейный бюджет</h1>
          <p>Управляйте финансами вместе</p>
        </div>

        <!-- Форма входа -->
        <div id="login-form" class="auth-form">
          <h2>Вход</h2>
          <form id="loginForm">
            <div class="input-group">
              <i class="fas fa-envelope"></i>
              <input
                type="email"
                id="loginEmail"
                placeholder="Email"
                required
              />
            </div>
            <div class="input-group">
              <i class="fas fa-lock"></i>
              <input
                type="password"
                id="loginPassword"
                placeholder="Пароль"
                required
              />
            </div>
            <button type="submit" class="btn btn-primary">Войти</button>
          </form>
          <p class="auth-switch">
            Нет аккаунта?
            <a href="#" onclick="showRegisterForm()">Зарегистрироваться</a>
          </p>
        </div>

        <!-- Форма регистрации -->
        <div id="register-form" class="auth-form hidden">
          <h2>Регистрация</h2>
          <form id="registerForm">
            <div class="input-group">
              <i class="fas fa-user"></i>
              <input type="text" id="registerName" placeholder="Имя" required />
            </div>
            <div class="input-group">
              <i class="fas fa-envelope"></i>
              <input
                type="email"
                id="registerEmail"
                placeholder="Email"
                required
              />
            </div>
            <div class="input-group">
              <i class="fas fa-lock"></i>
              <input
                type="password"
                id="registerPassword"
                placeholder="Пароль"
                required
              />
            </div>
            <button type="submit" class="btn btn-primary">
              Зарегистрироваться
            </button>
          </form>
          <p class="auth-switch">
            Уже есть аккаунт? <a href="#" onclick="showLoginForm()">Войти</a>
          </p>
        </div>

        <!-- Форма присоединения к бюджету -->
        <div id="join-budget-form" class="auth-form hidden">
          <h2>Присоединиться к бюджету</h2>
          <form id="joinBudgetForm">
            <div class="input-group">
              <i class="fas fa-key"></i>
              <input
                type="text"
                id="budgetId"
                placeholder="ID бюджета"
                required
              />
            </div>
            <button type="submit" class="btn btn-primary">
              Присоединиться
            </button>
          </form>
          <div class="budget-actions">
            <button onclick="createNewBudget()" class="btn btn-secondary">
              Создать новый бюджет
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Основное приложение -->
    <div id="app" class="app hidden">
      <!-- Навигация -->
      <nav class="navbar">
        <div class="nav-brand">
          <i class="fas fa-wallet"></i>
          <span>Семейный бюджет</span>
        </div>

        <div class="nav-menu">
          <a href="#home" class="nav-link active" data-page="home">
            <i class="fas fa-home"></i>
            <span>Главная</span>
          </a>
          <a href="#categories" class="nav-link" data-page="categories">
            <i class="fas fa-tags"></i>
            <span>Категории</span>
          </a>
          <a href="#limits" class="nav-link" data-page="limits">
            <i class="fas fa-chart-line"></i>
            <span>Лимиты</span>
          </a>
          <a href="#goals" class="nav-link" data-page="goals">
            <i class="fas fa-target"></i>
            <span>Цели</span>
          </a>
          <a href="#transactions" class="nav-link" data-page="transactions">
            <i class="fas fa-list"></i>
            <span>Операции</span>
          </a>
          <a href="#settings" class="nav-link" data-page="settings">
            <i class="fas fa-cog"></i>
            <span>Настройки</span>
          </a>
        </div>

        <div class="nav-actions">
          <button
            id="theme-toggle"
            class="btn btn-icon"
            title="Переключить тему"
          >
            <i class="fas fa-moon"></i>
          </button>
          <button id="logout-btn" class="btn btn-icon" title="Выйти">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </nav>

      <!-- Контент страниц -->
      <main class="main-content">
        <!-- Главная страница -->
        <section id="home-page" class="page active">
          <div class="page-header">
            <h1>Общий баланс</h1>
            <div class="total-balance">
              <span id="total-balance">0</span>
              <span id="currency-symbol">zł</span>
            </div>
          </div>

          <div class="users-grid">
            <div id="users-container">
              <!-- Карточки пользователей будут добавлены динамически -->
            </div>
          </div>
        </section>

        <!-- Категории -->
        <section id="categories-page" class="page">
          <div class="page-header">
            <h1>Категории</h1>
            <button class="btn btn-primary" onclick="openAddCategoryModal()">
              <i class="fas fa-plus"></i> Добавить категорию
            </button>
          </div>
          <div id="categories-container" class="categories-grid">
            <!-- Категории будут добавлены динамически -->
          </div>
        </section>

        <!-- Лимиты -->
        <section id="limits-page" class="page">
          <div class="page-header">
            <h1>Лимиты расходов</h1>
            <button class="btn btn-primary" onclick="openSetLimitModal()">
              <i class="fas fa-plus"></i> Установить лимит
            </button>
          </div>
          <div id="limits-container" class="limits-grid">
            <!-- Лимиты будут добавлены динамически -->
          </div>
        </section>

        <!-- Цели -->
        <section id="goals-page" class="page">
          <div class="page-header">
            <h1>Цели накопления</h1>
            <button class="btn btn-primary" onclick="openAddGoalModal()">
              <i class="fas fa-plus"></i> Добавить цель
            </button>
          </div>
          <div id="goals-container" class="goals-grid">
            <!-- Цели будут добавлены динамически -->
          </div>
        </section>

        <!-- Операции -->
        <section id="transactions-page" class="page">
          <div class="page-header">
            <h1>История операций</h1>
            <div class="filters">
              <select id="user-filter">
                <option value="">Все пользователи</option>
              </select>
              <select id="category-filter">
                <option value="">Все категории</option>
              </select>
              <select id="type-filter">
                <option value="">Все типы</option>
                <option value="income">Доходы</option>
                <option value="expense">Расходы</option>
              </select>
              <input type="date" id="date-filter" />
            </div>
          </div>
          <div id="transactions-container" class="transactions-list">
            <!-- Операции будут добавлены динамически -->
          </div>
        </section>

        <!-- Настройки -->
        <section id="settings-page" class="page">
          <div class="page-header">
            <h1>Настройки</h1>
          </div>
          <div class="settings-grid">
            <div class="setting-card">
              <h3><i class="fas fa-money-bill"></i> Валюта</h3>
              <select id="currency-select">
                <option value="PLN">Польский злотый (zł)</option>
                <option value="USD">Доллар США ($)</option>
                <option value="UAH">Украинская гривна (₴)</option>
              </select>
            </div>

            <div class="setting-card">
              <h3><i class="fas fa-palette"></i> Тема</h3>
              <div class="theme-toggle">
                <label class="switch">
                  <input type="checkbox" id="theme-switch" />
                  <span class="slider">
                    <i class="fas fa-sun"></i>
                    <i class="fas fa-moon"></i>
                  </span>
                </label>
              </div>
            </div>

            <div class="setting-card">
              <h3><i class="fas fa-users"></i> ID бюджета</h3>
              <div class="budget-id-display">
                <input type="text" id="budget-id-display" readonly />
                <button onclick="copyBudgetId()" class="btn btn-secondary">
                  <i class="fas fa-copy"></i> Копировать
                </button>
              </div>
              <p class="help-text">
                Поделитесь этим ID с партнёром для подключения к общему бюджету
              </p>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Модальные окна -->
    <!-- Модалка добавления дохода/расхода -->
    <div id="transaction-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="transaction-modal-title">Добавить операцию</h2>
          <button class="close-btn" onclick="closeModal('transaction-modal')">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <form id="transaction-form">
          <div class="input-group">
            <label>Сумма</label>
            <input type="number" id="transaction-amount" step="0.01" required />
          </div>
          <div class="input-group">
            <label>Категория</label>
            <select id="transaction-category" required>
              <!-- Категории будут загружены динамически -->
            </select>
          </div>
          <div class="input-group">
            <label>Комментарий</label>
            <input type="text" id="transaction-description" />
          </div>
          <div class="modal-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeModal('transaction-modal')"
            >
              Отмена
            </button>
            <button type="submit" class="btn btn-primary">Добавить</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Модалка добавления категории -->
    <div id="category-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Добавить категорию</h2>
          <button class="close-btn" onclick="closeModal('category-modal')">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <form id="category-form">
          <div class="input-group">
            <label>Название</label>
            <input type="text" id="category-name" required />
          </div>
          <div class="input-group">
            <label>Иконка</label>
            <select id="category-icon">
              <option value="fas fa-shopping-cart">🛒 Покупки</option>
              <option value="fas fa-utensils">🍽️ Еда</option>
              <option value="fas fa-car">🚗 Транспорт</option>
              <option value="fas fa-home">🏠 Дом</option>
              <option value="fas fa-gamepad">🎮 Развлечения</option>
              <option value="fas fa-heartbeat">💊 Здоровье</option>
              <option value="fas fa-graduation-cap">🎓 Образование</option>
              <option value="fas fa-gift">🎁 Подарки</option>
            </select>
          </div>
          <div class="input-group">
            <label>Цвет</label>
            <input type="color" id="category-color" value="#4CAF50" />
          </div>
          <div class="modal-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeModal('category-modal')"
            >
              Отмена
            </button>
            <button type="submit" class="btn btn-primary">Добавить</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Модалка установки лимита -->
    <div id="limit-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Установить лимит</h2>
          <button class="close-btn" onclick="closeModal('limit-modal')">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <form id="limit-form">
          <div class="input-group">
            <label>Категория</label>
            <select id="limit-category" required>
              <!-- Категории будут загружены динамически -->
            </select>
          </div>
          <div class="input-group">
            <label>Лимит</label>
            <input type="number" id="limit-amount" step="0.01" required />
          </div>
          <div class="modal-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeModal('limit-modal')"
            >
              Отмена
            </button>
            <button type="submit" class="btn btn-primary">Установить</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Модалка добавления цели -->
    <div id="goal-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Добавить цель</h2>
          <button class="close-btn" onclick="closeModal('goal-modal')">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <form id="goal-form">
          <div class="input-group">
            <label>Название</label>
            <input type="text" id="goal-name" required />
          </div>
          <div class="input-group">
            <label>Целевая сумма</label>
            <input type="number" id="goal-amount" step="0.01" required />
          </div>
          <div class="input-group">
            <label>Дедлайн</label>
            <input type="date" id="goal-deadline" />
          </div>
          <div class="modal-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeModal('goal-modal')"
            >
              Отмена
            </button>
            <button type="submit" class="btn btn-primary">Добавить</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Модалка перевода на цель -->
    <div id="transfer-goal-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Перевести на цель</h2>
          <button class="close-btn" onclick="closeModal('transfer-goal-modal')">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <form id="transfer-goal-form">
          <div class="input-group">
            <label>Сумма</label>
            <input type="number" id="transfer-amount" step="0.01" required />
          </div>
          <div class="modal-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeModal('transfer-goal-modal')"
            >
              Отмена
            </button>
            <button type="submit" class="btn btn-primary">Перевести</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Уведомления -->
    <div id="notifications-container" class="notifications-container"></div>

    <!-- Подключение главного скрипта -->
    <script type="module" src="./src/app.js"></script>
  </body>
</html>
