<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Семейный бюджет</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-primary: #1a1a1a;
        --bg-secondary: #2d2d2d;
        --bg-card: #3a3a3a;
        --text-primary: #ffffff;
        --text-secondary: #b0b0b0;
        --accent-blue: #4a9eff;
        --accent-green: #4caf50;
        --accent-red: #f44336;
        --border-color: #505050;
        --shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Header */
      .header {
        text-align: center;
        margin-bottom: 40px;
        padding: 20px 0;
        border-bottom: 2px solid var(--border-color);
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        background: linear-gradient(
          45deg,
          var(--accent-blue),
          var(--accent-green)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
      }

      /* Auth Screen */
      .auth-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--bg-primary);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .auth-container {
        background: var(--bg-card);
        border-radius: 20px;
        padding: 40px;
        width: 90%;
        max-width: 400px;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
      }

      .auth-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .auth-header h2 {
        color: var(--accent-blue);
        margin-bottom: 10px;
      }

      .input-group {
        position: relative;
        margin-bottom: 20px;
      }

      .input-group input {
        width: 100%;
        padding: 15px 45px;
        border: 2px solid var(--border-color);
        border-radius: 10px;
        font-size: 16px;
        background: var(--bg-secondary);
        color: var(--text-primary);
        transition: border-color 0.3s;
      }

      .input-group input:focus {
        outline: none;
        border-color: var(--accent-blue);
      }

      .input-group i {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-secondary);
      }

      .btn {
        width: 100%;
        padding: 15px;
        background: var(--accent-blue);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s;
        margin-bottom: 15px;
      }

      .btn:hover {
        background: #3a8bef;
        transform: translateY(-2px);
      }

      .btn:disabled {
        background: var(--border-color);
        cursor: not-allowed;
        transform: none;
      }

      .auth-switch {
        text-align: center;
        color: var(--text-secondary);
        cursor: pointer;
        transition: color 0.3s;
      }

      .auth-switch:hover {
        color: var(--accent-blue);
      }

      /* Main App */
      .main-app {
        display: none;
      }

      .main-app.active {
        display: block;
      }

      /* Navigation */
      .nav-bar {
        background: var(--bg-card);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
      }

      .nav-brand {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--accent-blue);
      }

      .nav-actions {
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .user-info {
        color: var(--text-secondary);
        margin-right: 20px;
      }

      .logout-btn {
        padding: 8px 15px;
        background: var(--accent-red);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .logout-btn:hover {
        background: #d32f2f;
        transform: translateY(-1px);
      }

      /* Family Cards */
      .family-section {
        margin-bottom: 40px;
      }

      .family-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .person-card {
        background: var(--bg-card);
        border-radius: 15px;
        padding: 25px;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
        transition: transform 0.3s;
      }

      .person-card:hover {
        transform: translateY(-5px);
      }

      .person-header {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
      }

      .person-avatar {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(
          45deg,
          var(--accent-blue),
          var(--accent-green)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: white;
        margin-right: 15px;
      }

      .person-info h3 {
        font-size: 1.3rem;
        margin-bottom: 5px;
      }

      .person-info .role {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .balance-info {
        text-align: center;
        margin-bottom: 20px;
      }

      .balance-amount {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .balance-positive {
        color: var(--accent-green);
      }

      .balance-negative {
        color: var(--accent-red);
      }

      .balance-label {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .card-actions {
        display: flex;
        gap: 10px;
      }

      .btn-small {
        flex: 1;
        padding: 10px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s;
      }

      .btn-income {
        background: var(--accent-green);
        color: white;
      }

      .btn-expense {
        background: var(--accent-red);
        color: white;
      }

      .btn-small:hover {
        transform: translateY(-2px);
      }

      /* Transactions */
      .transactions-section {
        background: var(--bg-card);
        border-radius: 15px;
        padding: 25px;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .section-title {
        font-size: 1.3rem;
        color: var(--text-primary);
      }

      .transactions-list {
        max-height: 400px;
        overflow-y: auto;
      }

      .transaction-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        margin-bottom: 10px;
        background: var(--bg-secondary);
        border-radius: 10px;
        border: 1px solid var(--border-color);
        transition: all 0.3s;
      }

      .transaction-item:hover {
        transform: translateX(5px);
      }

      .transaction-info h4 {
        margin-bottom: 5px;
      }

      .transaction-info p {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .transaction-amount {
        font-size: 1.1rem;
        font-weight: bold;
      }

      .amount-income {
        color: var(--accent-green);
      }

      .amount-expense {
        color: var(--accent-red);
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        animation: fadeIn 0.3s ease;
      }

      .modal.active {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .modal-content {
        background: var(--bg-card);
        border-radius: 20px;
        padding: 30px;
        width: 90%;
        max-width: 500px;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
        animation: slideIn 0.3s ease;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .modal-title {
        font-size: 1.3rem;
        color: var(--text-primary);
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 24px;
        color: var(--text-secondary);
        cursor: pointer;
        transition: color 0.3s;
      }

      .close-btn:hover {
        color: var(--text-primary);
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: var(--text-secondary);
        font-weight: 500;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        background: var(--bg-secondary);
        color: var(--text-primary);
        font-size: 16px;
        transition: border-color 0.3s;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--accent-blue);
      }

      .hidden {
        display: none !important;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideIn {
        from {
          transform: translateY(-50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      /* Responsive */
      @media (max-width: 768px) {
        .family-cards {
          grid-template-columns: 1fr;
        }

        .nav-bar {
          flex-direction: column;
          gap: 15px;
        }

        .container {
          padding: 10px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="auth-screen">
      <div class="auth-container">
        <div class="auth-header">
          <i
            class="fas fa-spinner fa-spin"
            style="font-size: 48px; color: var(--accent-blue)"
          ></i>
          <h2 style="margin-top: 20px">Загрузка...</h2>
        </div>
      </div>
    </div>

    <!-- Auth Screen -->
    <div id="auth-screen" class="auth-screen hidden">
      <div class="auth-container">
        <div class="auth-header">
          <h2>Семейный бюджет</h2>
          <p>Войдите в систему</p>
        </div>

        <!-- Login Form -->
        <div id="login-form">
          <div class="input-group">
            <i class="fas fa-envelope"></i>
            <input type="email" id="login-email" placeholder="Email" required />
          </div>
          <div class="input-group">
            <i class="fas fa-lock"></i>
            <input
              type="password"
              id="login-password"
              placeholder="Пароль"
              required
            />
          </div>
          <button id="login-btn" class="btn">Войти</button>
          <p class="auth-switch" onclick="toggleAuthMode()">
            Нет аккаунта? Зарегистрироваться
          </p>
        </div>

        <!-- Register Form -->
        <div id="register-form" class="hidden">
          <div class="input-group">
            <i class="fas fa-user"></i>
            <input type="text" id="register-name" placeholder="Имя" required />
          </div>
          <div class="input-group">
            <i class="fas fa-envelope"></i>
            <input
              type="email"
              id="register-email"
              placeholder="Email"
              required
            />
          </div>
          <div class="input-group">
            <i class="fas fa-lock"></i>
            <input
              type="password"
              id="register-password"
              placeholder="Пароль"
              required
            />
          </div>
          <button id="register-btn" class="btn">Зарегистрироваться</button>
          <p class="auth-switch" onclick="toggleAuthMode()">
            Уже есть аккаунт? Войти
          </p>
        </div>
      </div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="main-app">
      <div class="container">
        <!-- Navigation -->
        <nav class="nav-bar">
          <div class="nav-brand">
            <i class="fas fa-wallet"></i> Семейный бюджет
          </div>
          <div class="nav-actions">
            <span class="user-info"
              >Добро пожаловать, <span id="user-name">Пользователь</span></span
            >
            <button class="logout-btn" onclick="logout()">
              <i class="fas fa-sign-out-alt"></i> Выйти
            </button>
          </div>
        </nav>

        <!-- Header -->
        <div class="header">
          <h1><i class="fas fa-home"></i> Семейный бюджет</h1>
          <p>Управляйте финансами всей семьи</p>
        </div>

        <!-- Family Cards -->
        <section class="family-section">
          <div class="family-cards">
            <!-- Артур's Card -->
            <div class="person-card" data-person="artur">
              <div class="person-header">
                <div class="person-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <div class="person-info">
                  <h3>Артур</h3>
                  <span class="role">Глава семьи</span>
                </div>
              </div>
              <div class="balance-info">
                <div class="balance-amount balance-positive" id="artur-balance">
                  0 ₽
                </div>
                <div class="balance-label">Личный баланс</div>
              </div>
              <div class="card-actions">
                <button
                  class="btn-small btn-income"
                  onclick="openTransactionModal('artur', 'income')"
                >
                  <i class="fas fa-plus"></i> Доход
                </button>
                <button
                  class="btn-small btn-expense"
                  onclick="openTransactionModal('artur', 'expense')"
                >
                  <i class="fas fa-minus"></i> Расход
                </button>
              </div>
            </div>

            <!-- Валерия's Card -->
            <div class="person-card" data-person="valeria">
              <div class="person-header">
                <div
                  class="person-avatar"
                  style="background: linear-gradient(45deg, #e91e63, #9c27b0)"
                >
                  <i class="fas fa-user"></i>
                </div>
                <div class="person-info">
                  <h3>Валерия</h3>
                  <span class="role">Супруга</span>
                </div>
              </div>
              <div class="balance-info">
                <div
                  class="balance-amount balance-positive"
                  id="valeria-balance"
                >
                  0 ₽
                </div>
                <div class="balance-label">Личный баланс</div>
              </div>
              <div class="card-actions">
                <button
                  class="btn-small btn-income"
                  onclick="openTransactionModal('valeria', 'income')"
                >
                  <i class="fas fa-plus"></i> Доход
                </button>
                <button
                  class="btn-small btn-expense"
                  onclick="openTransactionModal('valeria', 'expense')"
                >
                  <i class="fas fa-minus"></i> Расход
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- Transactions -->
        <section class="transactions-section">
          <div class="section-header">
            <h2 class="section-title">
              <i class="fas fa-list"></i> Последние операции
            </h2>
          </div>
          <div class="transactions-list" id="transactions-list">
            <!-- Transactions will be loaded here -->
          </div>
        </section>
      </div>
    </div>

    <!-- Transaction Modal -->
    <div id="transaction-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="modal-title">Добавить операцию</h3>
          <button class="close-btn" onclick="closeModal()">&times;</button>
        </div>
        <form id="transaction-form">
          <div class="form-group">
            <label for="transaction-description">Описание</label>
            <input
              type="text"
              id="transaction-description"
              placeholder="Введите описание"
              required
            />
          </div>
          <div class="form-group">
            <label for="transaction-amount">Сумма (₽)</label>
            <input
              type="number"
              id="transaction-amount"
              placeholder="0"
              min="0"
              step="0.01"
              required
            />
          </div>
          <div class="form-group">
            <label for="transaction-category">Категория</label>
            <select id="transaction-category" required>
              <!-- Income categories -->
              <option value="">Выберите категорию</option>
              <optgroup label="Доходы" id="income-categories">
                <option value="salary">Зарплата</option>
                <option value="freelance">Фриланс</option>
                <option value="business">Бизнес</option>
                <option value="investment">Инвестиции</option>
                <option value="other-income">Другое</option>
              </optgroup>
              <!-- Expense categories -->
              <optgroup label="Расходы" id="expense-categories">
                <option value="food">Продукты</option>
                <option value="transport">Транспорт</option>
                <option value="utilities">Коммунальные</option>
                <option value="entertainment">Развлечения</option>
                <option value="health">Здоровье</option>
                <option value="shopping">Покупки</option>
                <option value="other-expense">Другое</option>
              </optgroup>
            </select>
          </div>
          <button type="submit" class="btn" id="submit-transaction">
            Добавить
          </button>
        </form>
      </div>
    </div>

    <!-- Firebase Scripts -->
    <script>
      // Локальное хранение для демонстрации (заменит Firebase в дальнейшем)
      class LocalStorage {
        static getUser() {
          return JSON.parse(localStorage.getItem("currentUser"));
        }

        static setUser(user) {
          localStorage.setItem("currentUser", JSON.stringify(user));
        }

        static removeUser() {
          localStorage.removeItem("currentUser");
        }

        static getTransactions() {
          return JSON.parse(localStorage.getItem("transactions") || "[]");
        }

        static addTransaction(transaction) {
          const transactions = this.getTransactions();
          transaction.id = Date.now().toString();
          transaction.date = new Date();
          transactions.unshift(transaction);
          localStorage.setItem("transactions", JSON.stringify(transactions));
          return transaction;
        }
      }

      // Global variables
      let currentUser = null;
      let currentPerson = "";
      let currentTransactionType = "";

      // DOM elements
      const loadingScreen = document.getElementById("loading-screen");
      const authScreen = document.getElementById("auth-screen");
      const mainApp = document.getElementById("main-app");
      const loginForm = document.getElementById("login-form");
      const registerForm = document.getElementById("register-form");
      const userNameEl = document.getElementById("user-name");
      const transactionModal = document.getElementById("transaction-modal");

      // Initialize app
      setTimeout(() => {
        loadingScreen.classList.add("hidden");

        // Проверяем, есть ли сохраненный пользователь
        const savedUser = LocalStorage.getUser();
        if (savedUser) {
          currentUser = savedUser;
          showMainApp();
          loadBalances();
          loadTransactions();
        } else {
          authScreen.classList.remove("hidden");
        }
      }, 1500);

      // Auth functions
      window.toggleAuthMode = function () {
        loginForm.classList.toggle("hidden");
        registerForm.classList.toggle("hidden");
      };

      // Login
      document
        .getElementById("login-btn")
        .addEventListener("click", async () => {
          const email = document.getElementById("login-email").value;
          const password = document.getElementById("login-password").value;

          if (!email || !password) {
            alert("Заполните все поля");
            return;
          }

          // Простая проверка для демо
          if (email && password.length >= 6) {
            const user = {
              email: email,
              displayName: email.split("@")[0],
              uid: "demo-" + Date.now(),
            };

            currentUser = user;
            LocalStorage.setUser(user);
            userNameEl.textContent = user.displayName;
            showMainApp();
            loadBalances();
            loadTransactions();
          } else {
            alert("Неверные данные для входа");
          }
        });

      // Register
      document
        .getElementById("register-btn")
        .addEventListener("click", async () => {
          const name = document.getElementById("register-name").value;
          const email = document.getElementById("register-email").value;
          const password = document.getElementById("register-password").value;

          if (!name || !email || !password) {
            alert("Заполните все поля");
            return;
          }

          if (password.length < 6) {
            alert("Пароль должен содержать минимум 6 символов");
            return;
          }

          const user = {
            email: email,
            displayName: name,
            uid: "demo-" + Date.now(),
          };

          currentUser = user;
          LocalStorage.setUser(user);
          userNameEl.textContent = user.displayName;
          showMainApp();
          loadBalances();
          loadTransactions();
        });

      // Logout
      window.logout = function () {
        currentUser = null;
        LocalStorage.removeUser();
        showAuthScreen();
      };

      function showMainApp() {
        authScreen.classList.add("hidden");
        mainApp.classList.add("active");
      }

      function showAuthScreen() {
        mainApp.classList.remove("active");
        authScreen.classList.remove("hidden");
      }

      // Transaction modal functions
      window.openTransactionModal = function (person, type) {
        currentPerson = person;
        currentTransactionType = type;

        const title = type === "income" ? "Добавить доход" : "Добавить расход";
        document.getElementById("modal-title").textContent = `${title} - ${
          person === "artur" ? "Артур" : "Валерия"
        }`;

        // Show/hide appropriate categories
        const incomeCategories = document.getElementById("income-categories");
        const expenseCategories = document.getElementById("expense-categories");
        const categorySelect = document.getElementById("transaction-category");

        if (type === "income") {
          incomeCategories.style.display = "block";
          expenseCategories.style.display = "none";
          // Выбираем первую опцию дохода
          categorySelect.value = "salary";
        } else {
          incomeCategories.style.display = "none";
          expenseCategories.style.display = "block";
          // Выбираем первую опцию расхода
          categorySelect.value = "food";
        }

        transactionModal.classList.add("active");
      };

      window.closeModal = function () {
        transactionModal.classList.remove("active");
        document.getElementById("transaction-form").reset();
      };

      // Submit transaction
      document
        .getElementById("transaction-form")
        .addEventListener("submit", (e) => {
          e.preventDefault();

          const description = document.getElementById(
            "transaction-description"
          ).value;
          const amount = parseFloat(
            document.getElementById("transaction-amount").value
          );
          const category = document.getElementById(
            "transaction-category"
          ).value;

          if (!description || !amount || !category) {
            alert("Заполните все поля");
            return;
          }

          const transaction = {
            person: currentPerson,
            type: currentTransactionType,
            description,
            amount,
            category,
            userId: currentUser.uid,
          };

          LocalStorage.addTransaction(transaction);
          closeModal();
          loadBalances();
          loadTransactions();
        });

      // Load balances
      function loadBalances() {
        if (!currentUser) return;

        const transactions = LocalStorage.getTransactions().filter(
          (t) => t.userId === currentUser.uid
        );
        const balances = { artur: 0, valeria: 0 };

        transactions.forEach((transaction) => {
          const amount =
            transaction.type === "income"
              ? transaction.amount
              : -transaction.amount;
          balances[transaction.person] += amount;
        });

        // Update UI
        updateBalanceDisplay("artur", balances.artur);
        updateBalanceDisplay("valeria", balances.valeria);
      }

      function updateBalanceDisplay(person, balance) {
        const balanceEl = document.getElementById(`${person}-balance`);
        balanceEl.textContent = `${balance.toFixed(2)} ₽`;

        balanceEl.className =
          "balance-amount " +
          (balance >= 0 ? "balance-positive" : "balance-negative");
      }

      // Load transactions
      function loadTransactions() {
        if (!currentUser) return;

        const transactions = LocalStorage.getTransactions().filter(
          (t) => t.userId === currentUser.uid
        );
        const transactionsList = document.getElementById("transactions-list");
        transactionsList.innerHTML = "";

        if (transactions.length === 0) {
          transactionsList.innerHTML =
            '<p style="text-align: center; color: var(--text-secondary); padding: 20px;">Операций пока нет. Добавьте первую операцию!</p>';
          return;
        }

        transactions.forEach((transaction) => {
          const transactionEl = createTransactionElement(transaction);
          transactionsList.appendChild(transactionEl);
        });
      }

      function createTransactionElement(transaction) {
        const div = document.createElement("div");
        div.className = "transaction-item";

        const personName = transaction.person === "artur" ? "Артур" : "Валерия";
        const typeIcon = transaction.type === "income" ? "fa-plus" : "fa-minus";
        const amountClass =
          transaction.type === "income" ? "amount-income" : "amount-expense";
        const amountPrefix = transaction.type === "income" ? "+" : "-";

        // Категории на русском
        const categoryNames = {
          salary: "Зарплата",
          freelance: "Фриланс",
          business: "Бизнес",
          investment: "Инвестиции",
          "other-income": "Другое",
          food: "Продукты",
          transport: "Транспорт",
          utilities: "Коммунальные",
          entertainment: "Развлечения",
          health: "Здоровье",
          shopping: "Покупки",
          "other-expense": "Другое",
        };

        div.innerHTML = `
                <div class="transaction-info">
                    <h4><i class="fas ${typeIcon}"></i> ${
          transaction.description
        }</h4>
                    <p>${personName} • ${
          categoryNames[transaction.category] || transaction.category
        } • ${formatDate(transaction.date)}</p>
                </div>
                <div class="transaction-amount ${amountClass}">
                    ${amountPrefix}${transaction.amount.toFixed(2)} ₽
                </div>
            `;

        return div;
      }

      function formatDate(dateStr) {
        const date = new Date(dateStr);
        return date.toLocaleDateString("ru-RU", {
          day: "2-digit",
          month: "2-digit",
          year: "numeric",
          hour: "2-digit",
          minute: "2-digit",
        });
      }

      // Close modal on outside click
      transactionModal.addEventListener("click", (e) => {
        if (e.target === transactionModal) {
          closeModal();
        }
      });

      // Close modal on Escape key
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeModal();
        }
      });
    </script>
  </body>
</html>
